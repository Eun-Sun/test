<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../reset.css">
    <style>
        html,body{
            height: 100%;
        }
        /* 각브라우저병 스크롤바 없애기 */
        body::-webkit-scrollbar{
            display: none;
        }
        body::-moz-scrollbar{
            display: none;
        }
        body::-o-scrollbar{
            display: none;
        }
        body::-ms-scrollbar{
            display: none;
        }
        header{
            display: flex;
            justify-content: space-between; /*영쪽정렬*/
            align-items: flex-end;/*세로로 container 하단에 붙도록 한다.*/
            position: fixed;
            left: 0; top: 0;
            width: 100%; height: 80px;
            background: rgb(209, 255, 209);
        }
        header>h1{
            flex: 0 0 200px; /* 200(로고) + nav(1000)의 크기를 제외한 여유공간의 값을 전혀 가져가지 랂는다. 즉, 여유공간이 있어도 커지지않고 작아지지도 않는다.*/
            height: 50px;
            background: lightyellow;
            color: #606060;
        }
        header>nav{
            flex: 0 0 1000px; /* 200(로고) + nav의 크기(1000)를 제외한 여유공간의 값을 전혀 가져가지 랂는다. 즉, 여유공간이 있어도 커지지않고 작아지지도 않는다.*/
            height: 50px;
        }
        header>nav>ul{
            display: flex;
            height: 50px;
        }
        header>nav>ul>li{
            flex: 1 1 auto;
            background: rgb(243, 237, 255);
        }
        header>nav>ul>li:nth-child(odd){
            background: rgb(255, 240, 240);
        }
        header>nav>ul>li>a{
            display: flex; /*a요소 내부에 있는 글자를 가운데 보내기 위한 방편*/
            justify-content: center;
            align-items: center;
            height: 50px;
        }
        section{
            box-sizing:border-box; 
            padding-top: 100px; padding-left: 50px;
            height: 100%;}
        section:nth-of-type(1){background: lavender;}
        section:nth-of-type(2){background: lavenderblush;}
        section:nth-of-type(3){background: lightblue;}
        section:nth-of-type(4){background: lightcyan;}
        section:nth-of-type(5){background: lightgrey;}
        section>h1{font:bold 32px sans-serif; color: #fff;}
        section>p{color: rgb(150, 150, 150);}
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script src="script/jquery.mousewheel.min.js"></script>
    <script>
        $(function(){
            //새로고침하면 '스크롤바'를 가장 처음으로 이동시키기
            $("html, body").animate({"scrollTop":0},1);

            var scrollEvnt = {
                count:0,
                dir:"down",
                waitScroll:false,
                len:$("section").length,
                scroll:true
            }

            //네비데이션 클릭이벤트
            $("nav").children("ul").children("li").click(function(){
                //현재 몇번째를 클릭했는지를 알아내서 그 번지에 해당하는 요소로 이동하면 된다.
                scrollEvnt.count = $(this).index(); 
                //이때 카운터가 증가될 필요가 없음. 누르는곳이 위치이기때문에.
                scrollEvnt.scroll = false;
                moveBox();
                
            });
            //스크롤은 개인별로 하는 방식이 모두 다르다.
            //스크롤은 스크롤하는 중에 이벤트가 계속 발생한다.
            //스크롤이 끝날때마다 하나씩 (위 또는 아래로) 이동시키면 된다.
            $(window).on("mousewheel", function(e){
                scrollEvnt.scroll = true;
                var boxH = $("section").eq(0).height();
                //mousewheel 플러그인 이벤트 객체e에서 deltaY, deltaX등 여러가지 속성이 있다. 이속성은 유저가 휠을 사용할 때 자동으로 나타나게 된다. 필요에 의해서 사용할 수도 있고 사용하지 않을 수도 있다.
                //우리가 배경이미지를 움직였을 때 이벤트 객체에서는 document위에서 마우스가 위치한 x,y지점이 중요해서 이벤트 객체를 사용했듯이 이번에는 내가 스크롤, 마우스휠을 움직일땨 아래로 스크롤 했는지, 위로 스크롤 했는지 판단해주는
                //이벤트 객체를 플러그인이 제공한다.
                if(e.deltaY == -1){
                    scrollEvnt.dir = "down";
                }else{
                    scrollEvnt.dir = "up";
                }                

                if(scrollEvnt.waitScroll){ //null,undefined,0은 if 조건문에서 false값을 갖는다.
                    clearTimeout(scrollEvnt.waitScroll);
                }
                scrollEvnt.waitScroll = setTimeout(function(){
                    moveBox();
                },25); //setTimeout끝
            });

            function moveBox(){
                if(scrollEvnt.scroll){
                    if(scrollEvnt.dir == "down"){
                        scrollEvnt.count++;
                        if(scrollEvnt.count >=scrollEvnt.len){ //스크롤을 끝까지 내렸다면,
                            scrollEvnt.count = scrollEvnt.len-1; //마지막에 고정한다.
                        }
                    }else{
                        scrollEvnt.count--;
                        if(scrollEvnt.count <0){ //스크롤을 처음으로 위치시켰다면,
                            scrollEvnt.count =0; //처음위치에 고정한다.
                        }
                    }
                }
                //console.log(scrollEvnt.count);
                //jQuery요소객체.offset()은 요소의 top과 left값을 갖고있는 객체를 return한다.
                var nextTop = $("section").eq(scrollEvnt.count).offset().top;

                //console.log(nextTop);
                $("html,body").animate({"scrollTop":nextTop},500);
                
            }

        });
    </script>
</head>
<body>
    <!-- (header>h1+nav>h1+ul>li*5>a)+section*5>h1+p -->
    <!-- (header>h1{로고}+nav>h1.hidden+ul>li*5>a[href="#"]{메뉴$})+section*5>h1{섹션$}+P{$번째 내용이랍니다.... 행복하세요} -->
    <header>
        <h1>로고</h1>
        <nav>
            <h1 class="hidden">주요카테고리</h1>
            <ul>
                <li><a href="#">메뉴1</a></li>
                <li><a href="#">메뉴2</a></li>
                <li><a href="#">메뉴3</a></li>
                <li><a href="#">메뉴4</a></li>
                <li><a href="#">메뉴5</a></li>
            </ul>
        </nav>
    </header>
    <section class="box1">
        <h1>섹션1</h1>
        <P>1번째 내용이랍니다.... 행복하세요</P>
    </section>
    <section class="box2">
        <h1>섹션2</h1>
        <P>2번째 내용이랍니다.... 행복하세요</P>
    </section>
    <section class="box3">
        <h1>섹션3</h1>
        <P>3번째 내용이랍니다.... 행복하세요</P>
    </section>
    <section class="box4">
        <h1>섹션4</h1>
        <P>4번째 내용이랍니다.... 행복하세요</P>
    </section>
    <section class="box5">
        <h1>섹션5</h1>
        <P>5번째 내용이랍니다.... 행복하세요</P>
    </section>
</body>
</html>